<p id="notice"><%= notice %></p>

<h1>Projects</h1>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>Name</th>
      <th>Desc</th>
      <th>Assigned Team</th>
      <th colspan="3">Details</th>
    </tr>
  </thead>

  <tbody>
    <% @projects.each do |project| %>
      <tr>
        <td><%= project.name %></td>
        <td><%= project.desc %></td>
        <td>
        <% project.teams.each do |team|%>
            <ul>
              <li>
              <%= link_to team.name, Team.find_by(id: team.id) %>
              </li>
            </ul>
           <% end %>
        </td>
        <td><%= link_to 'Show', project %>
        <%= link_to 'Edit', edit_project_path(project) %>
        <%= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Project', new_project_path %>

<%
 if current_user.role == User.roles.keys[0] 
  controller.redirect_to '/static_pages'
  if !Student.exists?(:email => current_user.email)
    controller.redirect_to '/students/new'
  end
end
%>
